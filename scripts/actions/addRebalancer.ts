import hre from "hardhat";
import {ethers} from "hardhat";

import CONFIG from "../common/config"

import {
    getChainId,
    deployContract,
    waitTx,
    Mode,
    getMode,
    getChildChainId,
    getRootChainId
} from "../common/utlis"


async function main() {

  const chainId = await getChainId();
  
  if (hre.network.name === 'mainnet') {
      console.log(
      '\n\n Deploying Contracts to mainnet. Hit ctrl + c to abort'
      )
  } else if (hre.network.name === 'matic') {
      console.log(
      '\n\n Deploying Contracts to polygon. Hit ctrl + c to abort'
      )
  } else if (hre.network.name === 'avax') {
      console.log(
      '\n\n Deploying Contracts to avax. Hit ctrl + c to abort'
      )
  } else if (hre.network.name === 'hardhat') {
      console.log(
      '\n\n Deploying Contracts to hardhat.'
      )
  }

    const rebalancerAddress = "0x910E413DBF3F6276Fe8213fF656726bDc142E08E"

    const liteBridgeProxy = await ethers.getContractAt("LiteMainnetBridge", CONFIG.LITE_BRIDGE[chainId])
    let txHash = await waitTx(liteBridgeProxy.toggleRebalancer(rebalancerAddress, true))
    console.log("Updated Mapping of liteBridge: ", txHash)

}


// We recommend this pattern to be able to use async/await everywhere
// and properly handle errors.
main().catch((error) => {
  console.error(error);
  process.exitCode = 1;
});
